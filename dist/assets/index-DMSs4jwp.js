const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Login-H2lpNzoc.js","assets/axios-CCb-kr4I.js","assets/@vue-C1_HKBMx.js","assets/pinia-DoMM712Q.js","assets/bootstrap-CJ3D_gRJ.js","assets/@popperjs-WhmJkuoZ.js","assets/bootstrap-DRQo3kaA.css","assets/bootstrap-vue-3-C4nBWjFx.js","assets/bootstrap-vue-3-C7dyc402.css","assets/vue-router-yQ3pcn0R.js","assets/vue-chartjs-CXOf9EPh.js","assets/chart.js-BuLztui6.js","assets/@kurkle-BZxJdD1U.js","assets/vue-toastification-COUycyGz.js","assets/@vuepic-DXhf3Elp.js","assets/@vuepic-B555ueTZ.css","assets/Login-J4sxE21w.css","assets/bootstrap-icons-DfSMHEQP.css","assets/@fortawesome-vxo9JX9r.css","assets/Register-CNGxJ6Gr.js","assets/Register-D3BNnRm4.css","assets/WorkingTime-DrYxr4EK.js","assets/WorkingTime-C2lTLw3g.css"])))=>i.map(i=>d[i]);
import{d as E,e as c,v as O,p as Z,a1 as _,f as d,B as a,g as f,j as m,J as g,A as L,x as v,a as $,E as k,F as j,i as z,aa as F}from"./@vue-C1_HKBMx.js";import{c as X}from"./pinia-DoMM712Q.js";import"./bootstrap-CJ3D_gRJ.js";import{T as K,X as G}from"./bootstrap-vue-3-C4nBWjFx.js";import{R as Q,c as Y,a as ee}from"./vue-router-yQ3pcn0R.js";import{B as te,L as re,R as oe}from"./vue-chartjs-CXOf9EPh.js";import{C as P,p as S,a as M,b as R,c as ne,d as B,e as q,f as V,P as W,g as ae,i as se}from"./chart.js-BuLztui6.js";import{a as I}from"./axios-CCb-kr4I.js";import{u as le}from"./vue-toastification-COUycyGz.js";/* empty css                        *//* empty css                     */import"./@vuepic-DXhf3Elp.js";import"./@popperjs-WhmJkuoZ.js";import"./@kurkle-BZxJdD1U.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();const ie=E({__name:"App",setup(t){return(e,n)=>(c(),O(Z(Q)))}}),ce="modulepreload",ue=function(t){return"/"+t},H={},w=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),p=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));r=Promise.allSettled(n.map(h=>{if(h=ue(h),h in H)return;H[h]=!0;const y=h.endsWith(".css"),u=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${u}`))return;const o=document.createElement("link");if(o.rel=y?"stylesheet":ce,y||(o.as="script"),o.crossOrigin="",o.href=h,p&&o.setAttribute("nonce",p),document.head.appendChild(o),y)return new Promise((b,C)=>{o.addEventListener("load",b),o.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(l){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=l,window.dispatchEvent(p),!p.defaultPrevented)throw l}return r.then(l=>{for(const p of l||[])p.status==="rejected"&&s(p.reason);return e().catch(s)})},de="/assets/avatar-Dkr_yDJj.jpeg",D=(t,e)=>{const n=t.__vccOpts||t;for(const[i,r]of e)n[i]=r;return n};P.register(S,M,R,ne,B,q);const pe={name:"BarChart",components:{Bar:te},props:{chartData:{type:Object,required:!0},chartOptions:{type:Object,default:()=>({responsive:!0,scales:{x:{beginAtZero:!0,title:{display:!0,text:"Jours de la semaine"}},y:{beginAtZero:!0,min:0,max:200,title:{display:!0,text:"Heures travaillées"}}}})}}};function me(t,e,n,i,r,s){const l=_("Bar");return c(),O(l,{data:n.chartData,options:n.chartOptions},null,8,["data","options"])}const he=D(pe,[["render",me]]);P.register(S,M,R,V,B,q,W);const ge={name:"LineChart",components:{Line:re},props:{chartData:{type:Object,required:!0},chartOptions:{type:Object,default:()=>({responsive:!0,scales:{x:{beginAtZero:!0,title:{display:!0,text:"Jours de la semaine"}},y:{beginAtZero:!0,min:0,max:200,title:{display:!0,text:"Heures travaillées"}}}})}}};function fe(t,e,n,i,r,s){const l=_("Line");return c(),O(l,{data:n.chartData,options:n.chartOptions},null,8,["data","options"])}const _e=D(ge,[["render",fe]]);P.register(S,M,R,ae,W,V,se);const ke={name:"RadarChart",components:{Radar:oe},props:{chartData:{type:Object,required:!0},chartOptions:{type:Object,default:()=>({responsive:!0,scales:{r:{beginAtZero:!0,min:0,max:200,title:{display:!0,text:"Heures travaillées"}}}})}}};function be(t,e,n,i,r,s){const l=_("Radar");return c(),O(l,{data:n.chartData,options:n.chartOptions},null,8,["data","options"])}const ye=D(ke,[["render",be]]),ve=E({name:"ChartManager",components:{BarChart:he,LineChart:_e,RadarChart:ye},props:{userId:{type:String,required:!1}},data(){return{workingTimes:[],selectedChart:"bar",chartData:null,loading:!0,chartOptions:{}}},methods:{async getWorkingTimes(){try{const e=(await I.get("http://localhost:4000/api/workingtime")).data.data;if(Array.isArray(e)){const n=[0,0,0,0,0];e.forEach(i=>{const r=new Date(i.start).getDay();if(r>=1&&r<=5){const s=this.calculateDuration(i.start,i.end);n[r-1]+=s}}),this.chartData={labels:["Lundi","Mardi","Mercredi","Jeudi","Vendredi"],datasets:[{label:"Moyenne des heures travaillées par jour",backgroundColor:"#42b883",data:n}]},this.workingTimes=e}else console.error("Erreur: 'data' n'est pas un tableau",e)}catch(t){console.error("Erreur lors de la récupération des heures de travail :",t)}finally{this.loading=!1}},calculateDuration(t,e){const n=new Date(t);return(new Date(e).getTime()-n.getTime())/(1e3*60*60)}},mounted(){this.getWorkingTimes()}}),Ce={class:"d-flex justify-content-center chart-buttons"},Oe={key:0};function De(t,e,n,i,r,s){const l=_("b-button"),p=_("BarChart"),h=_("LineChart"),y=_("RadarChart");return c(),d("div",null,[e[6]||(e[6]=a("h1",null,"Chart Manager",-1)),e[7]||(e[7]=a("h2",null,"Le graphique suivant montre la moyenne d'heures travaillées (par jour) de tous les employés grâce à trois graphiques différents",-1)),a("div",Ce,[f(l,{class:L([{"btn-active":t.selectedChart==="bar"},"btn-spacing text-white"]),variant:"success",onClick:e[0]||(e[0]=u=>t.selectedChart="bar")},{default:m(()=>e[3]||(e[3]=[g(" Bar Chart ")])),_:1},8,["class"]),f(l,{class:L([{"btn-active":t.selectedChart==="line"},"btn-spacing text-white"]),variant:"success",onClick:e[1]||(e[1]=u=>t.selectedChart="line")},{default:m(()=>e[4]||(e[4]=[g(" Line Chart ")])),_:1},8,["class"]),f(l,{class:L([{"btn-active":t.selectedChart==="radar"},"btn-spacing text-white"]),variant:"success",onClick:e[2]||(e[2]=u=>t.selectedChart="radar")},{default:m(()=>e[5]||(e[5]=[g(" Radar Chart ")])),_:1},8,["class"])]),t.loading?(c(),d("p",Oe,"Loading data...")):v("",!0),t.selectedChart==="bar"&&t.chartData?(c(),O(p,{key:1,chartData:t.chartData,chartOptions:t.chartOptions},null,8,["chartData","chartOptions"])):v("",!0),t.selectedChart==="line"&&t.chartData?(c(),O(h,{key:2,chartData:t.chartData,chartOptions:t.chartOptions},null,8,["chartData","chartOptions"])):v("",!0),t.selectedChart==="radar"&&t.chartData?(c(),O(y,{key:3,chartData:t.chartData,chartOptions:t.chartOptions},null,8,["chartData","chartOptions"])):v("",!0)])}const N=D(ve,[["render",De],["__scopeId","data-v-a0033436"]]),we=Object.freeze(Object.defineProperty({__proto__:null,default:N},Symbol.toStringTag,{value:"Module"})),$e={key:0},Ie={key:1},Ee={key:2,class:"clock-table"},Te={key:3,class:"clock-table"},Ae={key:4},T="8",Le=E({__name:"ClockManager",setup(t){const e=le(),n=$(null),i=$(!1),r=$([]),s=$(null),l=u=>u?new Date(u).toLocaleString():"N/A",p=async()=>{try{const o=(await I.get(`http://localhost:4000/api/clocks/${T}`)).data.clock_periods;if(!Array.isArray(o))throw new TypeError("clock_periods is not an array");r.value=[];let b=null;for(const C of o)C.clock_out===null?b=C.clock_in:(r.value.push({clockIn:C.clock_in,clockOut:C.clock_out}),b=null);b&&r.value.push({clockIn:b,clockOut:null}),e.success("All clocks loaded successfully!")}catch(u){console.error("Error fetching all clocks:",u),e.error("Error loading clocks. Please try again.")}},h=async()=>{try{const u=new Date().toISOString(),o=await I.post(`http://localhost:4000/api/clocks/${T}`,{userID:T,clock_in:u});if(console.log("Clock In Response:",o.data),!o.data||!o.data.clock_period||!o.data.clock_period.clock_in)throw new Error("Invalid response structure");n.value=o.data.clock_period.clock_in,i.value=!0,s.value={clockIn:o.data.clock_period.clock_in,clockOut:void 0},e.success(o.data.message)}catch(u){console.error("Error during clock in:",u),e.error("Clock in failed. Please try again.")}},y=async()=>{try{const u=await I.post(`http://localhost:4000/api/clocks/${T}/out`),o=new Date().toISOString();console.log("Clock Out Response:",u.data),n.value=null,i.value=!1,s.value&&(s.value.clockOut=o),e.success(u.data.message)}catch(u){console.error("Error during clock out:",u),e.error("Clock out failed. Please try again.")}};return(u,o)=>(c(),d("div",null,[o[2]||(o[2]=a("h2",null,"Clock Manager",-1)),a("div",null,[i.value?(c(),d("p",$e,"Working since: "+k(l(n.value)),1)):(c(),d("p",Ie,"No work period in progress."))]),i.value?v("",!0):(c(),d("button",{key:0,class:"btn",onClick:h},"Clock In")),i.value?(c(),d("button",{key:1,class:"btn",onClick:y},"Clock Out")):v("",!0),a("button",{class:"btn",onClick:p},"Show All Clocks"),o[3]||(o[3]=a("h3",null,"Current Clock Period:",-1)),s.value?(c(),d("table",Ee,[o[0]||(o[0]=a("thead",null,[a("tr",null,[a("th",{class:"stubborn"},"Clock In"),a("th",{class:"stubborn"},"Clock Out")])],-1)),a("tbody",null,[a("tr",null,[a("td",null,k(l(s.value.clockIn)),1),a("td",null,k(s.value.clockOut?l(s.value.clockOut):"In progress"),1)])])])):v("",!0),o[4]||(o[4]=a("h3",null,"All User Clocks:",-1)),r.value.length?(c(),d("table",Te,[o[1]||(o[1]=a("thead",null,[a("tr",null,[a("th",{class:"stubborn"},"Clock In"),a("th",{class:"stubborn"},"Clock Out")])],-1)),a("tbody",null,[(c(!0),d(j,null,z(r.value,(b,C)=>(c(),d("tr",{key:C},[a("td",null,k(b.clockIn?l(b.clockIn):"N/A"),1),a("td",null,k(b.clockOut?l(b.clockOut):"In progress"),1)]))),128))])])):(c(),d("p",Ae,"No clocks found."))]))}}),U=D(Le,[["__scopeId","data-v-d065bae9"]]),Pe=Object.freeze(Object.defineProperty({__proto__:null,default:U},Symbol.toStringTag,{value:"Module"})),Se=E({components:{BTable:K},props:{userId:{type:String,required:!0}},data(){return{workingTimes:[],errorMessage:""}},methods:{async getWorkingTimes(){try{const t=await I.get(`http://localhost:4000/api/workingtime/${this.userId}`).then(({data:e})=>e.data).then(e=>{console.log("Data:",e),this.workingTimes=e});console.log("Working times loaded:",this.workingTimes)}catch(t){console.error("Error fetching working times:",t),this.errorMessage="Failed to load working times. Please try again later."}},formatDate(t){return new Date(t).toLocaleDateString(void 0,{year:"numeric",month:"2-digit",day:"2-digit"})},formatHour(t){return new Date(t).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})},calculateDuration(t,e){const n=new Date(t),i=new Date(e);if(i<n)return"End time is before start time";const r=i.getHours()-n.getHours(),s=i.getMinutes()-n.getMinutes();return`${r} H : ${s} m`}},mounted(){this.getWorkingTimes()}}),Me={key:0},Re={key:1};function He(t,e,n,i,r,s){const l=_("b-badge"),p=_("b-table"),h=_("b-col"),y=_("b-row"),u=_("b-container");return c(),O(u,null,{default:m(()=>[f(y,null,{default:m(()=>[f(h,null,{default:m(()=>[a("h2",null,[e[0]||(e[0]=g("Working Times for User ")),f(l,null,{default:m(()=>[g(k(t.userId),1)]),_:1})]),f(p,{striped:"",hover:"",items:t.workingTimes,fields:["id","date","start","end","duration"]},{"cell(id)":m(o=>[g(k(o.item.id),1)]),"cell(date)":m(o=>[g(k(t.formatDate(o.item.start)),1)]),"cell(start)":m(o=>[g(k(t.formatHour(o.item.start)),1)]),"cell(end)":m(o=>[g(k(t.formatHour(o.item.end)),1)]),"cell(duration)":m(o=>[g(k(t.calculateDuration(o.item.start,o.item.end)),1)]),_:1},8,["items"]),!t.workingTimes||t.workingTimes.length==0?(c(),d("p",Me,"No working times available.")):v("",!0),t.errorMessage?(c(),d("p",Re,k(t.errorMessage),1)):v("",!0)]),_:1})]),_:1})]),_:1})}const x=D(Se,[["render",He]]),je=Object.freeze(Object.defineProperty({__proto__:null,default:x},Symbol.toStringTag,{value:"Module"})),Be={class:"navbar"},qe={class:"navbar-right"},Ve=["aria-expanded"],We={key:0,class:"dropdown-menu"},Ne={class:"grid-container"},Ue={class:"grid-item full-width"},xe={class:"grid-item"},Je={class:"grid-item"},Ze=E({__name:"HomeView",setup(t){const e=$(!1),n=()=>{confirm("Are you sure you want to disconnect?")&&console.log("User disconnected")};return(i,r)=>{const s=_("router-link");return c(),d(j,null,[a("header",Be,[r[5]||(r[5]=a("div",{class:"logo"},"App Logo",-1)),a("div",qe,[r[1]||(r[1]=a("img",{class:"avatar",src:de,alt:"User Avatar"},null,-1)),a("button",{onClick:n,class:"disconnect-button","aria-label":"Disconnect"},"Disconnect"),a("button",{onClick:r[0]||(r[0]=l=>e.value=!e.value),class:"burger-menu","aria-expanded":e.value,"aria-label":"Toggle menu"}," ☰ ",8,Ve)]),e.value?(c(),d("nav",We,[a("ul",null,[a("li",null,[f(s,{to:"/profile"},{default:m(()=>r[2]||(r[2]=[g("Profile")])),_:1})]),a("li",null,[f(s,{to:"/settings"},{default:m(()=>r[3]||(r[3]=[g("Settings")])),_:1})]),a("li",null,[f(s,{to:"/help"},{default:m(()=>r[4]||(r[4]=[g("Help")])),_:1})])])])):v("",!0)]),a("main",Ne,[a("section",Ue,[f(x,{"user-id":"5"})]),a("section",xe,[f(N,{"user-id":"5"})]),a("section",Je,[f(U)])])],64)}}}),ze=D(Ze,[["__scopeId","data-v-8fc9c95a"]]);function Fe(){return!!localStorage.getItem("token")}const J=Y({history:ee(),routes:[{path:"/home",name:"Home",component:ze,props:!0},{path:"/",name:"Login",component:()=>w(()=>import("./Login-H2lpNzoc.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]))},{path:"/register",name:"Register",component:()=>w(()=>import("./Register-CNGxJ6Gr.js"),__vite__mapDeps([19,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,20,17,18]))},{path:"/clock/:userId",name:"ClockManager",component:()=>w(()=>Promise.resolve().then(()=>Pe),void 0),props:!0,meta:{requiresAuth:!0}},{path:"/workingtimes/:userId",name:"getWorkingTimes",component:()=>w(()=>Promise.resolve().then(()=>je),void 0),props:!0,meta:{requiresAuth:!0}},{path:"/workingtime/:userId",name:"CUDWorkingTime",component:()=>w(()=>import("./WorkingTime-DrYxr4EK.js"),__vite__mapDeps([21,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,22,17,18])),props:!0,meta:{requiresAuth:!0}},{path:"/chartManager/:userId",name:"ChartManager",component:()=>w(()=>Promise.resolve().then(()=>we),void 0),props:!0,meta:{requiresAuth:!0}}]});J.beforeEach((t,e,n)=>{t.matched.some(i=>i.meta.requiresAuth)?Fe()?n():n({name:"Login"}):n()});const A=F(ie);A.use(X());A.use(G);A.use(J);A.mount("#app");export{D as _};
